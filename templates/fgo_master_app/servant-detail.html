{% extends "fgo_master_app/base.html" %}
{% block title %}{{ servant.name }} | FGOカルデアデータベース{% endblock %}

{% block main-title %}No. {{ servant.No }}　{{ servant.name }}{% endblock %}
{% block sub-title %}{{ servant.get_class_name_display }}{% endblock %}

{% block main %}

  <div class="detail-wrapper">
    <span class="detail-caption">ステータス</span>
    <div class="detail-main">
      <table width="100%">
        <tr>
          <td class="status">{% for _ in value|center:servant.rarity %}⭐{% endfor %}</td>
          <td class="status">HP {{ servant.max_HP }}</td>
        </tr>
        <tr>
          <td class="status">cost {{ servant.cost }}</td>
          <td class="status">ATK {{ servant.max_ATK }}</td>
        </tr>
      </table>
    </div>
  </div>

  <div class="detail-wrapper">
    <span class="detail-caption">宝具</span>
    <div class="detail-main">
      <p class="np-yomi">{{ servant.noble_phantasm.yomi }}</p>
      <p class="np-name">{{ servant.noble_phantasm.name }}</p>
      <table width="100%">
        <tr>
          <td>ランク</td>
          <td>{{ servant.noble_phantasm.rank }}</td>
        </tr>
        <tr>
          <td>種別</td>
          <td>{{ servant.noble_phantasm.anti }}</td>
        </tr>
      </table>
      <p>
        {{ servant.noble_phantasm.text }}
        {% for effect in servant.noble_phantasm.effect.all %}
          +{{ effect.text }}
        {% endfor %}
      </p>
    </div>
  </div>

  <div class="detail-wrapper">
    <span class="detail-caption">保有スキル</span>
    <div class="detail-main">
      <table width="100%">
        {% for skill in servant.active_skill.all %}
          <tr>
            <td>SKILL {{ forloop.counter }}</td>
            <td rowspan="2"><img src={{ skill.icon.url }}></td>
            <td>{{ skill.name }} {{ skill.rank }}</td>
          </tr>
          <tr>
            <td>CT {{ skill.CT }}</td>
            <td>
              {% for effect in skill.effect.all %}
                {{ effect.text }}
              {% endfor %}
            </td>
          </tr>
        {% endfor %}
      </table>
    </div>
  </div>

  <div class="detail-wrapper">
    <span class="detail-caption">クラススキル</span>
    <div class="detail-main">
      <table width="100%">
        {% for skill in servant.passive_skill.all %}
          <tr>
            <td rowspan="2">SKILL {{ forloop.counter }}</td>
            <td rowspan="2">{{ skill.icon }}</td>
            <td>{{ skill.name }} {{ skill.rank }}</td>
          </tr>
          <tr>
            <td>
              {% for effect in skill.effect.all %}
                {{ effect.text }}
              {% endfor %}
            </td>
          </tr>
        {% endfor %}
      </table>
    </div>
  </div>

  <h3>詳細</h3>
  <p>コマンドカード　{{ servant.get_command_cards_distribution_display }}</p>
  <p>属性　{{ servant.get_alignment1_display }}・{{ servant.get_alignment2_display }}</p>
  <p>隠し属性　{{ servant.get_attribute_display }}</p>
  <p>性別　{{ servant.get_gender_display }}</p>
  <p>基礎ステータス</p>
  <p>HP　{{ servant.base_HP }} {{ servant.max_HP }} {{ servant.palingenesis_HP }}</p>
  <p>ATK　{{ servant.base_ATK }} {{ servant.max_ATK }} {{ servant.palingenesis_ATK }}</p>
  <p>スター発生率　{{ servant.star_getting_rate }}</p>
  <p>スター集中率　{{ servant.star_focusing_rate }}</p>
  <p>即死率　{{ servant.death_rate }}</p>
  <p>NP上昇基礎値（攻撃時／被ダメ時）　{{ servant.NP_with_attack }} / {{ servant.NP_with_damage }}</p>

{% endblock %}
